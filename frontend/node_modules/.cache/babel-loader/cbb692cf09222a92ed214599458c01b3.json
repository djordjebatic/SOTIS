{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/milica/Desktop/SOTiS/SOTIS-front/src/containers/DefaultLayout/DefaultLayout.js\";\nimport React, { Component, Suspense } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { Redirect } from 'react-router-dom';\nimport * as router from 'react-router-dom';\nimport \"../../../node_modules/react-notifications/lib/notifications.css\";\nimport \"../../../node_modules/react-notifications/lib/Notifications.js\";\nimport axios from 'axios';\nimport { Container, Modal, ModalBody, ModalFooter, Label, Button, Form, Input, InputGroup, FormText, InputGroupAddon, InputGroupText, Row, ModalHeader, Nav } from 'reactstrap';\nimport { Sidebar, InputItem, DropdownItem, Icon, Item, Logo, LogoText } from 'react-sidebar-ui';\nimport { NotificationContainer, NotificationManager } from 'react-notifications'; // sidebar nav config\n\nimport navigation from '../../_nav';\nimport adminnavigation from '../../nav_admin';\nimport studentnavigation from '../../nav_student';\nimport professornavigation from '../../nav_professor'; // routes config\n\nimport routes from '../../routes'; //import config from '../../config';\n//import '../../scss/vendors/custom.css';\n\nconst DefaultAside = /*#__PURE__*/React.lazy(_c = () => import('./DefaultAside'));\n_c2 = DefaultAside;\nconst DefaultHeader = /*#__PURE__*/React.lazy(_c3 = () => import('./DefaultHeader'));\n_c4 = DefaultHeader;\nconst url = process.env.REACT_APP_DOMAIN + ':' + process.env.REACT_APP_PORT + '/';\n\nclass DefaultLayout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.login = e => {\n      console.log(\"ASDAS\");\n      this.setState({\n        primary: true\n      });\n    };\n\n    this.AccountRecovery = event => {\n      let data = [];\n      data.push(this.state.email);\n      axios({\n        method: 'post',\n        url: url + 'user/forgotPassword',\n        data: data,\n        ContentType: 'application/json'\n      }).then(response => {\n        if (response.status === 200) {\n          NotificationManager.success(\"Recovery email is sent.\", 'Success!', 3000);\n          this.setState({\n            hideInputMail: !this.state.hideInputMail\n          });\n        } else {\n          NotificationManager.error(response.data.accessToken, 'Email doesn\\'t exist in our system!', 3000);\n        }\n      }, error => {//NotificationManager.error(response.data.accessToken, 'Error!', 3000);\n      });\n    };\n\n    this.validateEmail = event => {\n      const regex = /\\S+@\\S+\\.\\S+/;\n\n      if (!regex.test(event.target.value)) //email not appropriate\n        {\n          this.setState({\n            formValidMail: true,\n            emailErrorText: \"Expected input: local@domain.\"\n          });\n        } else {\n        this.setState({\n          formValidMail: false,\n          emailErrorText: \"\"\n        });\n      }\n    };\n\n    this.validateLoginFields = () => {\n      if (this.state.username === \"\" || this.state.password === \"\") {\n        this.setState({\n          notFilledError: true,\n          formValid: true\n        });\n        return true;\n      } else {\n        this.setState({\n          notFilledError: false,\n          formValid: false\n        });\n        return false;\n      }\n    };\n\n    this.validateUsername = () => {\n      let regex = /^[A-Za-z0-9\\-_]+/;\n\n      if (this.state.username === \"\") {\n        this.setState({\n          usernameErrorText: \"Username is required.\",\n          formValid: true,\n          formErrorText: \"\"\n        });\n      } else if (!regex.test(this.state.username)) {\n        this.setState({\n          usernameErrorText: \"Alfanumerics, _ and - are only allowed.\",\n          formValid: true,\n          formErrorText: \"\"\n        });\n      } else {\n        this.setState({\n          usernameErrorText: \"\",\n          formErrorText: \"\",\n          formValid: false\n        });\n      }\n    };\n\n    this.cleanAll = () => this.setState({\n      registerShow: false,\n      password: \"\",\n      formValid: true,\n      usernameErrorText: \"\",\n      notFilledError: false,\n      formErrorText: \"\",\n      passErrorText: \"\",\n      username: \"\"\n    });\n\n    this.sendLogin = event => {\n      event.preventDefault();\n\n      if (this.validateLoginFields()) {\n        this.setState({\n          formErrorText: \"Both fields are required.\",\n          formValid: true\n        });\n      } else {\n        this.setState({\n          formValid: false\n        });\n        let data = {\n          \"username\": this.state.username,\n          \"password\": this.state.password\n        };\n        axios({\n          method: 'post',\n          url: url + 'auth/login',\n          data: data,\n          ContentType: 'application/json'\n        }).then(response => {\n          if (response.status === 200) {\n            localStorage.setItem(\"ulogovan\", response.data.accessToken);\n            localStorage.setItem(\"role\", response.data.role);\n            let array = [];\n            sessionStorage.setItem(\"basket\", JSON.stringify(array));\n            NotificationManager.success(\"Successfully logged in\", 'Success!', 3000);\n            this.props.history.push('/oglasi');\n          } else {\n            NotificationManager.error(response.data.accessToken, 'Error!', 3000);\n          }\n        }, error => {//NotificationManager.error(response.data.accessToken, 'Error!', 3000);\n        });\n        this.cleanAll();\n        this.togglePrimary();\n      }\n    };\n\n    this.loading = () => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"animated fadeIn pt-1 text-center\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 19\n    }, this);\n\n    this.navig = () => {\n      if (localStorage.getItem(\"role\") === \"ROLE_ADMIN\") {\n        return adminnavigation;\n      } else if (localStorage.getItem(\"role\") === \"ROLE_STUDENT\") {\n        return studentnavigation;\n      } else if (localStorage.getItem(\"role\") === \"ROLE_PROFESSOR\") {\n        return professornavigation;\n      } else {\n        return navigation;\n      }\n    };\n\n    this.navBar = () => {\n      let ret = /*#__PURE__*/_jsxDEV(Sidebar, {\n        fixed: true,\n        display: \"lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          children: \"\\xA0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Form, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Suspense, {\n          children: /*#__PURE__*/_jsxDEV(Nav, {\n            navConfig: this.navig(),\n            ...this.props,\n            router: router\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"footer\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 16\n      }, this);\n\n      if (localStorage.getItem('role')) return ret;else return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 14\n      }, this);\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      formValid: true,\n      // enable/disable submit button depending on form validation\n      notFilledError: true,\n      formErrorText: \"\",\n      passErrorText: \"\",\n      usernameErrorText: \"\",\n      changeFirstPass: false,\n      password1: \"\",\n      password11: \"\",\n      password11Validation: \"\",\n      password1Validation: \"\",\n      modal: false,\n      primary: false,\n      hideInputMail: true,\n      emailErrorText: \"\",\n      formValidMail: true,\n      email: \"\"\n    };\n    this.togglePrimary = this.togglePrimary.bind(this);\n    this.validateLoginFields = this.validateLoginFields.bind(this);\n    this.validateUsername = this.validateUsername.bind(this);\n    this.navig = this.navig.bind(this);\n    this.validateEmail = this.validateEmail.bind(this);\n    this.AccountRecovery = this.AccountRecovery.bind(this);\n  }\n\n  togglePrimary() {\n    this.setState({\n      primary: !this.state.primary\n    });\n  }\n\n  signOut(e) {\n    e.preventDefault();\n    localStorage.removeItem(\"ulogovan\");\n    localStorage.removeItem(\"role\");\n    localStorage.removeItem(\"start\");\n    localStorage.removeItem(\"end\");\n    sessionStorage.removeItem('basket');\n\n    if (window.location != \"https://localhost:3000/oglasi\") {\n      this.props.history.push('/oglasi');\n    } else {\n      window.location.reload();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        fixed: true,\n        children: /*#__PURE__*/_jsxDEV(Suspense, {\n          fallback: this.loading(),\n          children: /*#__PURE__*/_jsxDEV(DefaultHeader, {\n            onLogout: e => this.signOut(e),\n            onLogin: e => this.login(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-body\",\n        children: [this.navBar(), /*#__PURE__*/_jsxDEV(\"main\", {\n          className: \"main bgimg\",\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Container, {\n            fluid: true,\n            children: /*#__PURE__*/_jsxDEV(Suspense, {\n              fallback: this.loading(),\n              children: /*#__PURE__*/_jsxDEV(Switch, {\n                children: [routes.map((route, idx) => {\n                  return route.component ? /*#__PURE__*/_jsxDEV(Route, {\n                    authorize: route.authorize,\n                    path: route.path,\n                    exact: route.exact,\n                    name: route.name,\n                    render: props => /*#__PURE__*/_jsxDEV(route.component, { ...props\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 249,\n                      columnNumber: 32\n                    }, this)\n                  }, idx, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 23\n                  }, this) : null;\n                }), /*#__PURE__*/_jsxDEV(Redirect, {\n                  from: \"/\",\n                  to: \"/\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n          fixed: true,\n          children: /*#__PURE__*/_jsxDEV(Suspense, {\n            fallback: this.loading(),\n            children: /*#__PURE__*/_jsxDEV(DefaultAside, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.primary,\n        toggle: this.togglePrimary,\n        className: 'modal-primary ' + this.props.className,\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: \"Sign in to your account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            children: [/*#__PURE__*/_jsxDEV(InputGroup, {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(InputGroupAddon, {\n                addonType: \"prepend\",\n                children: /*#__PURE__*/_jsxDEV(InputGroupText, {\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"icon-user\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"text\",\n                placeholder: \"Username\",\n                autoComplete: \"username\",\n                value: this.state.username,\n                onChange: event => this.setState({\n                  username: event.target.value\n                }),\n                onBlur: this.validateUsername\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormText, {\n                color: \"danger\",\n                children: this.state.usernameErrorText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(InputGroupAddon, {\n                addonType: \"prepend\",\n                children: /*#__PURE__*/_jsxDEV(InputGroupText, {\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"icon-lock\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"password\",\n                placeholder: \"Password\",\n                value: this.state.password,\n                onChange: event => this.setState({\n                  password: event.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormText, {\n                color: \"danger\",\n                children: this.state.passErrorText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Label, {\n              color: \"info\",\n              hidden: this.state.hideInputMail,\n              children: \"Enter your email and we will send you recovery details:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n              className: \"mb-4\",\n              hidden: this.state.hideInputMail,\n              children: [/*#__PURE__*/_jsxDEV(InputGroupAddon, {\n                addonType: \"prepend\",\n                children: /*#__PURE__*/_jsxDEV(InputGroupText, {\n                  children: \"@\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"text\",\n                placeholder: \"email\",\n                value: this.state.email,\n                onChange: event => this.setState({\n                  email: event.target.value\n                }),\n                onBlur: this.validateEmail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormText, {\n                color: \"danger\",\n                children: this.state.emailErrorText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              children: /*#__PURE__*/_jsxDEV(FormText, {\n                color: \"danger\",\n                children: this.state.formErrorText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              className: \"text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"text-center\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  color: \"link\",\n                  onClick: event => this.setState({\n                    hideInputMail: !this.state.hideInputMail\n                  }),\n                  children: \"Forgot password?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [!this.state.hideInputMail && /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            onClick: this.AccountRecovery,\n            disabled: this.state.formValidMail,\n            children: \"Send email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 43\n          }, this), ' ', this.state.hideInputMail && /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            onClick: this.sendLogin,\n            disabled: this.state.formValid,\n            children: \"Log in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 46\n          }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n            color: \"secondary\",\n            onClick: this.togglePrimary,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NotificationContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default DefaultLayout;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"DefaultAside$React.lazy\");\n$RefreshReg$(_c2, \"DefaultAside\");\n$RefreshReg$(_c3, \"DefaultHeader$React.lazy\");\n$RefreshReg$(_c4, \"DefaultHeader\");","map":{"version":3,"sources":["/home/milica/Desktop/SOTiS/SOTIS-front/src/containers/DefaultLayout/DefaultLayout.js"],"names":["React","Component","Suspense","Route","Switch","Redirect","router","axios","Container","Modal","ModalBody","ModalFooter","Label","Button","Form","Input","InputGroup","FormText","InputGroupAddon","InputGroupText","Row","ModalHeader","Nav","Sidebar","InputItem","DropdownItem","Icon","Item","Logo","LogoText","NotificationContainer","NotificationManager","navigation","adminnavigation","studentnavigation","professornavigation","routes","DefaultAside","lazy","DefaultHeader","url","process","env","REACT_APP_DOMAIN","REACT_APP_PORT","DefaultLayout","constructor","props","login","e","console","log","setState","primary","AccountRecovery","event","data","push","state","email","method","ContentType","then","response","status","success","hideInputMail","error","accessToken","validateEmail","regex","test","target","value","formValidMail","emailErrorText","validateLoginFields","username","password","notFilledError","formValid","validateUsername","usernameErrorText","formErrorText","cleanAll","registerShow","passErrorText","sendLogin","preventDefault","localStorage","setItem","role","array","sessionStorage","JSON","stringify","history","togglePrimary","loading","navig","getItem","navBar","ret","changeFirstPass","password1","password11","password11Validation","password1Validation","modal","bind","signOut","removeItem","window","location","reload","render","map","route","idx","component","authorize","path","exact","name","className"],"mappings":"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","sourcesContent":["import React, {Component, Suspense} from 'react';\nimport {Route, Switch} from 'react-router-dom';\nimport {Redirect} from 'react-router-dom';\nimport * as router from 'react-router-dom';\nimport \"../../../node_modules/react-notifications/lib/notifications.css\"\nimport \"../../../node_modules/react-notifications/lib/Notifications.js\"\nimport axios from 'axios';\nimport {\n  Container, Modal, ModalBody, ModalFooter, Label,\n  Button, Form, Input, InputGroup, FormText,\n  InputGroupAddon, InputGroupText, Row, ModalHeader, Nav\n} from 'reactstrap';\nimport {Sidebar, InputItem, DropdownItem, Icon, Item, Logo, LogoText} from 'react-sidebar-ui'\nimport {NotificationContainer, NotificationManager} from 'react-notifications';\n\n// sidebar nav config\nimport navigation from '../../_nav';\nimport adminnavigation from '../../nav_admin';\nimport studentnavigation from '../../nav_student';\nimport professornavigation from '../../nav_professor';\n// routes config\nimport routes from '../../routes';\n//import config from '../../config';\n//import '../../scss/vendors/custom.css';\n\nconst DefaultAside = React.lazy(() => import('./DefaultAside'));\nconst DefaultHeader = React.lazy(() => import('./DefaultHeader'));\n\nconst url = (process.env.REACT_APP_DOMAIN) + ':' + (process.env.REACT_APP_PORT) + '/';\n\nclass DefaultLayout extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      formValid: true,   // enable/disable submit button depending on form validation\n      notFilledError: true,\n      formErrorText: \"\",\n      passErrorText: \"\",\n      usernameErrorText: \"\",\n      changeFirstPass: false,\n      password1: \"\",\n      password11: \"\",\n      password11Validation: \"\",\n      password1Validation: \"\",\n      modal: false,\n      primary: false ,\n      hideInputMail: true,\n      emailErrorText: \"\" ,\n      formValidMail: true ,\n      email: \"\"\n    };\n\n    this.togglePrimary = this.togglePrimary.bind(this);\n    this.validateLoginFields = this.validateLoginFields.bind(this);\n    this.validateUsername = this.validateUsername.bind(this);\n    this.navig = this.navig.bind(this);\n    this.validateEmail = this.validateEmail.bind(this)\n    this.AccountRecovery = this.AccountRecovery.bind(this)\n  }\n\n  login = e => {\n    console.log(\"ASDAS\");\n    this.setState({primary: true})\n  };\n\n  togglePrimary() {\n    this.setState({\n      primary: !this.state.primary,\n    });\n  }\n\n  AccountRecovery = (event) => {\n    let data = []\n    data.push(this.state.email)\n    axios({\n      method: 'post',\n      url: url + 'user/forgotPassword',\n      data: data,\n      ContentType: 'application/json'\n    }).then((response) => {\n      if (response.status === 200) {        \n        NotificationManager.success(\"Recovery email is sent.\", 'Success!', 3000); \n        this.setState({hideInputMail: !this.state.hideInputMail});       \n      } else {\n        NotificationManager.error(response.data.accessToken, 'Email doesn\\'t exist in our system!', 3000);\n      }\n\n    }, (error) => {\n      //NotificationManager.error(response.data.accessToken, 'Error!', 3000);\n\n    });\n  }\n\n  validateEmail = (event) => {\n    const regex = /\\S+@\\S+\\.\\S+/;\n     if ( !regex.test(event.target.value) )   //email not appropriate\n     {\n        this.setState({formValidMail: true, emailErrorText: \"Expected input: local@domain.\"})\n     } else {\n      this.setState({formValidMail: false, emailErrorText: \"\"})\n     }\n  }\n\n  validateLoginFields = () => {\n    if (this.state.username === \"\" || this.state.password === \"\") {\n      this.setState({notFilledError: true, formValid: true});\n      return true;\n    } else {\n      this.setState({notFilledError: false, formValid: false});\n      return false;\n    }\n  };\n\n  validateUsername = () => {\n    let regex = /^[A-Za-z0-9\\-_]+/;\n    if (this.state.username === \"\") {\n      this.setState({usernameErrorText: \"Username is required.\", formValid: true, formErrorText: \"\"});\n    } else if (!regex.test(this.state.username)) {\n      this.setState({usernameErrorText: \"Alfanumerics, _ and - are only allowed.\", formValid: true, formErrorText: \"\"});\n    } else {\n      this.setState({usernameErrorText: \"\", formErrorText: \"\", formValid: false});\n    }\n\n\n  };\n\n  cleanAll = () => this.setState({\n    registerShow: false, password: \"\", formValid: true, usernameErrorText: \"\",\n    notFilledError: false, formErrorText: \"\", passErrorText: \"\", username: \"\"\n  })\n\n  sendLogin = event => {\n    event.preventDefault();\n    \n    if (this.validateLoginFields()) {\n      this.setState({formErrorText: \"Both fields are required.\", formValid: true})\n    } else {\n      this.setState({formValid: false})\n      let data = {\n        \"username\": this.state.username,\n        \"password\": this.state.password\n      };\n      \n      axios({\n        method: 'post',\n        url: url + 'auth/login',\n        data: data,\n        ContentType: 'application/json'\n      }).then((response) => {\n        if (response.status === 200) {\n          localStorage.setItem(\"ulogovan\", response.data.accessToken);\n          localStorage.setItem(\"role\", response.data.role);\n          let array = [] ;\n          sessionStorage.setItem(\"basket\", JSON.stringify(array));\n          NotificationManager.success(\"Successfully logged in\", 'Success!', 3000);\n          this.props.history.push('/oglasi')\n        } else {\n          NotificationManager.error(response.data.accessToken, 'Error!', 3000);\n        }\n\n      }, (error) => {\n        //NotificationManager.error(response.data.accessToken, 'Error!', 3000);\n\n      });\n\n      this.cleanAll();\n      this.togglePrimary();\n    }\n  };\n\n\n  loading = () => <div className=\"animated fadeIn pt-1 text-center\">Loading...</div>\n\n  signOut(e) {\n    e.preventDefault()\n    localStorage.removeItem(\"ulogovan\");\n    localStorage.removeItem(\"role\");\n    localStorage.removeItem(\"start\");\n    localStorage.removeItem(\"end\");\n    sessionStorage.removeItem('basket');\n    if (window.location != \"https://localhost:3000/oglasi\") {\n      this.props.history.push('/oglasi');\n    }else {\n      window.location.reload();\n    }\n    \n   \n  }\n\n  navig = () => {\n    if (localStorage.getItem(\"role\") === \"ROLE_ADMIN\") {\n      return adminnavigation;\n    }else if (localStorage.getItem(\"role\") === \"ROLE_STUDENT\") {\n      return studentnavigation;\n    }else if (localStorage.getItem(\"role\") === \"ROLE_PROFESSOR\") {\n      return professornavigation;\n    } else {\n      return navigation;\n    }\n\n  }\n\n\n\n  navBar = () => {\n    let ret = (<Sidebar fixed display=\"lg\">\n      <header>&nbsp;</header>\n      <Form/>\n      <Suspense>\n        <Nav navConfig={this.navig()} {...this.props} router={router}/>\n      </Suspense>\n      <footer/>\n      \n    </Sidebar>);\n\n    if (localStorage.getItem('role'))\n      return ret;\n    else\n      return <div></div>;\n  };\n\n  render() {\n    return (\n      <div className=\"app\">\n        <header fixed>\n          <Suspense fallback={this.loading()}>\n            <DefaultHeader onLogout={e => this.signOut(e)} onLogin={e => this.login(e)}/>\n          </Suspense>\n        </header>\n        <div className=\"app-body\">\n          {this.navBar()}\n          <main className=\"main bgimg\">\n            <br></br>\n            <Container fluid>\n\n              <Suspense fallback={this.loading()}>\n\n                <Switch>\n                  {routes.map((route, idx) => {\n                    return route.component ? (\n                      <Route authorize={route.authorize}\n                             key={idx}\n                             path={route.path}\n                             exact={route.exact}\n                             name={route.name}\n                             render={props => (\n                               <route.component {...props} />\n                               )}/>\n                    ) : (null);\n                  })}\n                  <Redirect from=\"/\" to=\"/\"/>\n                </Switch>\n              </Suspense>\n            </Container>\n          </main>\n          <aside fixed>\n            <Suspense fallback={this.loading()}>\n              <DefaultAside/>\n            </Suspense>\n          </aside>\n        </div>\n        <Modal isOpen={this.state.primary} toggle={this.togglePrimary}\n               className={'modal-primary ' + this.props.className}>\n          <ModalHeader>Sign in to your account</ModalHeader>\n          <ModalBody>\n            <Form>\n\n              <InputGroup className=\"mb-3\">\n                <InputGroupAddon addonType=\"prepend\">\n                  <InputGroupText>\n                    <i className=\"icon-user\"></i>\n                  </InputGroupText>\n                </InputGroupAddon>\n                <Input type=\"text\" placeholder=\"Username\" autoComplete=\"username\" value={this.state.username}\n                       onChange={event => this.setState({username: event.target.value})}\n                       onBlur={this.validateUsername}/>\n                <FormText color=\"danger\">{this.state.usernameErrorText}</FormText>\n              </InputGroup>\n              <InputGroup className=\"mb-4\">\n                <InputGroupAddon addonType=\"prepend\">\n                  <InputGroupText>\n                    <i className=\"icon-lock\"></i>\n                  </InputGroupText>\n                </InputGroupAddon>\n                <Input type=\"password\" placeholder=\"Password\" value={this.state.password}\n                       onChange={event => this.setState({password: event.target.value})}/>\n                <FormText color=\"danger\">{this.state.passErrorText}</FormText>\n              </InputGroup>\n              <Label color=\"info\" hidden={this.state.hideInputMail}>Enter your email and we will send you recovery details:</Label>\n              <InputGroup className=\"mb-4\" hidden={this.state.hideInputMail}>              \n                <InputGroupAddon addonType=\"prepend\">\n                <InputGroupText>@</InputGroupText>\n                </InputGroupAddon>\n                <Input type=\"text\" placeholder=\"email\" value={this.state.email}\n                       onChange={event => this.setState({email: event.target.value})}\n                       onBlur={this.validateEmail}/>\n                <FormText color=\"danger\">{this.state.emailErrorText}</FormText>\n              </InputGroup>\n              <Row>\n                <FormText color=\"danger\">{this.state.formErrorText}</FormText>\n              </Row>\n              <Row className=\"text-center\">\n                <div class=\"text-center\">\n                <Button color=\"link\" onClick={event => this.setState({hideInputMail: !this.state.hideInputMail})}>Forgot password?</Button> \n                </div>\n              </Row>\n            </Form>\n          </ModalBody>\n          <ModalFooter>\n            {!this.state.hideInputMail && <Button color=\"primary\" onClick={this.AccountRecovery} disabled={this.state.formValidMail}>Send email</Button>}{' '}\n                {this.state.hideInputMail && <Button color=\"primary\" onClick={this.sendLogin} disabled={this.state.formValid}>Log in</Button>}{' '}\n            <Button color=\"secondary\" onClick={this.togglePrimary}>Cancel</Button>\n          </ModalFooter>\n        </Modal>\n        <NotificationContainer/>\n      </div>\n    );\n  }\n}\n\nexport default DefaultLayout;\n"]},"metadata":{},"sourceType":"module"}